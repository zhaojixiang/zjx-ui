---
nav:
title: Documents
path: /documents
group:
path: /ES6
title: ES6
---

## [前端性能优化](https://juejin.cn/post/6981673766178783262)

### 网络层面

- 构建策略
  - 减少打包时间
  - 减小打包体积
  - 配置 include/exclude 缩小 Loader 对文件的搜索范围；
  - 配置 cache 缓存 Loader 对文件的编译副本；
  - 配置 resolve 提高文件的搜索速度；
  - 配置 DllPlugin 将第三方依赖提前打包；
  - 配置 Thread 将 Loader 单进程转换为多进程；
  - 配置 BundleAnalyzer 分析打包文件结构；
  - 分割各个模块代码，提取相同部分代码；
  - 删除项目中未被引用代码，treeShaking；
  - 将路由页面/触发性功能单独打包为一个文件，使用时才加载
  - 压缩 HTML/CSS/JS 代码，压缩字体/图像/音频/视频
- 图像策略
  - 图像选型：了解所有图像类型的特点及其何种应用场景最合适
  - 图像压缩：在部署到生产环境前使用工具或脚本对其压缩处理
- 内容分发
  - 所有静态资源走 CDN：开发阶段确定哪些文件属于静态资源
  - 把静态资源与主页面置于不同域名下：避免请求带上 Cookie
- 缓存策略
  - 频繁变动资源：设置 Cache-Control:no-cache，使浏览器每次都发送请求到服务器，配合 Last-Modified/ETag 验证资源是否有效
  - 不常变化资源：设置 Cache-Control:max-age=31536000，对文件名哈希处理，当代码修改后生成新的文件名，当 HTML 文件引入文件名发生改变才会下载最新文件

### 渲染层面

- CSS 策略
  - 避免出现超过三层的嵌套规则
  - 避免为 ID 选择器添加多余选择器
  - 避免使用标签选择器代替类选择器
  - 避免使用通配选择器，只对目标节点声明规则
  - 避免重复匹配重复定义，关注可继承属性
- DOM 策略
  - 缓存 DOM 计算属性
  - 避免过多 DOM 操作
  - 使用 DOMFragment 缓存批量化 DOM 操作
- 阻塞策略
  - 脚本与 DOM/其它脚本的依赖关系很强：对<script>设置 defer
  - 脚本与 DOM/其它脚本的依赖关系不强：对<script>设置 async
- 回流重绘策略
  - 缓存 DOM 计算属性
  - 使用类合并样式，避免逐条改变样式
  - 使用 display 控制 DOM 显隐，将 DOM 离线化
- 异步更新策略
  - 在异步任务中修改 DOM 时把其包装成微任务

### 面试题

#### 前端有一个很耗时的任务，如何优化？

这个问题应该是要考 [WebWorker](https://zhuanlan.zhihu.com/p/79484282)

#### 优化首屏加载速度

- 减小资源体积
  - 压缩代码体积
  - 图片资源压缩
  - 组件拆分：将多次使用的
  - 开启 gzip 压缩
- 减少 http 请求次数
  - 合并请求：雪碧图
- 提升 http 请求响应速度
  - CDN 分发
  - http2
- 优化资源加载时机

  - 按需加载
  - 懒加载

- 路由懒加载
- SSR
- 增加带宽
